name: playwright-tests
on: 
    push:
        branches:
            - main

jobs:
    run-tests:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
            - name: setup dotnet environment
              uses: actions/setup-dotnet@v4
              with:
                dotnet-version: 8.0.x
            - name: install dependencies and build
              run: dotnet build
            - name: check that the browsers have been installed
              run: pwsh bin/Debug/net8.0/playwright.ps1 install --with-deps
            - name: run tests
              run: dotnet test
            - name: confirm the folder we are in for the test report 
              run: ls
            - name: upload test report artifact 
              if: always()
              uses: actions/upload-artifact@v4
              with:
                name: Test reports folder
                path: TestReports